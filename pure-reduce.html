

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A REDUCE Interface for the Pure Programming Language &mdash; Pure Language and Library Documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.56',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Pure Language and Library Documentation" href="index.html" />
    <link rel="next" title="Pure-CSV - Comma Separated Value Interface for the Pure Programming Language" href="pure-csv.html" />
    <link rel="prev" title="Pure-Rational - Rational number library for the Pure programming language" href="pure-rational.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pure-modindex.html" title="Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pure-csv.html" title="Pure-CSV - Comma Separated Value Interface for the Pure Programming Language"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pure-rational.html" title="Pure-Rational - Rational number library for the Pure programming language"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Pure Language and Library Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-reduce">
<span id="a-reduce-interface-for-the-pure-programming-language"></span><h1>A REDUCE Interface for the Pure Programming Language<a class="headerlink" href="#module-reduce" title="Permalink to this headline">¶</a></h1>
<p>Version 0.1, October 05, 2012</p>
<div class="line-block">
<div class="line">Albert Graef &lt;<a class="reference external" href="mailto:Dr&#46;Graef&#37;&#52;&#48;t-online&#46;de">Dr<span>&#46;</span>Graef<span>&#64;</span>t-online<span>&#46;</span>de</a>&gt;</div>
<div class="line">Kurt Pagani &lt;<a class="reference external" href="mailto:kp&#37;&#52;&#48;scios&#46;ch">kp<span>&#64;</span>scios<span>&#46;</span>ch</a>&gt;</div>
</div>
<p>This is a module providing access to the <a class="reference external" href="http://www.reduce-algebra.com/">REDUCE</a> computer algebra system from
Pure. It is based on the <a class="reference external" href="http://reduce-algebra.svn.sourceforge.net/viewvc/reduce-algebra/trunk/csl/cslbase/proc.h?view=markup">PROC interface</a> (a &#8220;procedural&#8221; interface to embed
REDUCE as a C library). More background information and a discussion of the
interface can be found in the <a class="reference external" href="http://groups.google.com/group/pure-lang/browse_thread/thread/c11e82ca2e9e8cbb">Embedding REDUCE</a> thread on the Pure mailing
list.</p>
<p>The interface can be found in reduce.pure (in particular, have a look at the
<a class="reference internal" href="#high-level-interface">high-level interface</a> defined near the end of the module), some basic
examples are in reduce_examp.pure. Please note that at present, this module is
still highly experimental and under heavy development. But the basic
functionality appears to work, and you&#8217;re welcome to discuss the new interface
on the mailing list and/or submit bug reports and patches.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Get the latest source from
<a class="reference external" href="http://pure-lang.googlecode.com/files/pure-reduce-0.1.tar.gz">http://pure-lang.googlecode.com/files/pure-reduce-0.1.tar.gz</a>.</p>
<p>You&#8217;ll need both the embedded REDUCE library (named reduce.so, reduce.dylib or
reduce.dll, depending on the system you have) and a REDUCE image file
(reduce.img) to make this module work. A Makefile is included with this
package so that you can build these yourself from the REDUCE sources. (In
principle, this only needs to be done once for the initial installation of
this module, but you may want to repeat this procedure every once in a while
to get the latest REDUCE version.)</p>
<p>Check out the latest REDUCE version from its svn repository with the following
command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">svn co https://reduce-algebra.svn.sourceforge.net/svnroot/reduce-algebra/trunk/ reduce-algebra</span>
</pre></div>
</div>
<p>This may take a while; REDUCE is a <em>big</em> package. Once it&#8217;s finished, just
drop the resulting reduce-algebra directory into the pure-reduce source
directory. Run <tt class="docutils literal"><span class="pre">make</span></tt> and then (if needed) <tt class="docutils literal"><span class="pre">make</span> <span class="pre">install</span></tt> in the
pure-reduce source directory. You should also run <tt class="docutils literal"><span class="pre">make</span> <span class="pre">check</span></tt> which runs a
few tests in order to check that the interface works ok (this can be done
without installing the package, but needs the REDUCE image and library).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case the above procedure doesn&#8217;t work for you, there are more
detailed instructions by Kurt Pagani on how to compile the relevant parts
of REDUCE, see the accompanying pure_reduce.txt file for details.</p>
</div>
</div>
<div class="section" id="high-level-interface">
<h2>High-Level Interface<a class="headerlink" href="#high-level-interface" title="Permalink to this headline">¶</a></h2>
<p>The goal here is to make it easy to run REDUCE from Pure; to these ends,
the most important features of the low-level PROC interface are wrapped in
a convenient way. Currently the following variables and functions are
provided:</p>
<dl class="variable">
<dt id="REDUCE_PATH">
<em class="property">variable </em><tt class="descname">REDUCE_PATH</tt><a class="headerlink" href="#REDUCE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>This variable holds a colon-delimited search path used to locate the
REDUCE image file (see <a class="reference internal" href="#reduce::start" title="reduce::start"><tt class="xref pure pure-func docutils literal"><span class="pre">reduce::start</span></tt></a> below). By default this
includes the current directory and the Pure library directory.</p>
</dd></dl>

<dl class="function">
<dt id="reduce::start">
<tt class="descclassname">reduce::</tt><tt class="descname">start</tt> image::string args::smatrix<a class="headerlink" href="#reduce::start" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the REDUCE system. This is done automatically when loading
this module, so normally you shouldn&#8217;t have to call this manually,
unless the image file isn&#8217;t found or you want to restart the REDUCE
system with your own image file or your own set of options. In any
case, this needs to be executed once before calling any other operation
of this module. When calling this operation manually, you need to
specify the name of the REDUCE image file and any desired extra
arguments as a string vector. Unless the filename contains a slash,
<a class="reference internal" href="#reduce::start" title="reduce::start"><tt class="xref pure pure-func docutils literal"><span class="pre">reduce::start</span></tt></a> searches the directories in <a class="reference internal" href="#REDUCE_PATH" title="REDUCE_PATH"><tt class="xref pure pure-var docutils literal"><span class="pre">REDUCE_PATH</span></tt></a> for
the image file. An exception is raised if the image file isn&#8217;t found.</p>
</dd></dl>

<dl class="function">
<dt id="reduce::finish">
<tt class="descclassname">reduce::</tt><tt class="descname">finish</tt><a class="headerlink" href="#reduce::finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the REDUCE system. You can call this to release the resources
of the REDUCE system. (<a class="reference internal" href="#reduce::start" title="reduce::start"><tt class="xref pure pure-func docutils literal"><span class="pre">reduce::start</span></tt></a> also invokes this
automatically if a REDUCE instance is already running, so it isn&#8217;t
necessary to call <a class="reference internal" href="#reduce::finish" title="reduce::finish"><tt class="xref pure pure-func docutils literal"><span class="pre">reduce::finish</span></tt></a> in this case.)</p>
</dd></dl>

<dl class="function">
<dt id="reduce::verbosity">
<tt class="descclassname">reduce::</tt><tt class="descname">verbosity</tt> n<a class="headerlink" href="#reduce::verbosity" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the verbosity level; 0 means no messages at all (which is the
default when using this module), and the following values may be or&#8217;ed
together to pick what you need:</p>
<div class="line-block">
<div class="line">1: messages whenever garbage collection happens</div>
<div class="line">2:  messages whenever a module of code is loaded</div>
<div class="line">4: extra details in the garbage collector messages</div>
</div>
</dd></dl>

<dl class="function">
<dt id="reduce::load">
<tt class="descclassname">reduce::</tt><tt class="descname">load</tt> name::string<a class="headerlink" href="#reduce::load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads REDUCE packages. Please check the REDUCE documentation for
details.</p>
</dd></dl>

<dl class="function">
<dt id="reduce::switch">
<tt class="descclassname">reduce::</tt><tt class="descname">switch</tt> name:string val::int<a class="headerlink" href="#reduce::switch" title="Permalink to this definition">¶</a></dt>
<dd><p>Lets you change global REDUCE options. Please check the REDUCE
documentation for details.</p>
</dd></dl>

<p>For convenience, the following operations are in the default namespace:</p>
<dl class="function">
<dt id="simplify">
<tt class="descname">simplify</tt> x<a class="headerlink" href="#simplify" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main entry point. It takes a REDUCE expression in Pure
format and tries to simplify it using REDUCE. The result is then
converted back to Pure format. Note that you need to quote <tt class="docutils literal"><span class="pre">x</span></tt> if you
want to prevent it from being evaluated on the Pure side.</p>
</dd></dl>

<dl class="function">
<dt id="lisp">
<tt class="descname">lisp</tt> x<a class="headerlink" href="#lisp" title="Permalink to this definition">¶</a></dt>
<dd><p>This can be used to execute arbitrary Lisp code, which is sometimes
necessary to perform special functions in the REDUCE system such as
declarations. The result is always a Pure list or an atomic value. Note
that you need to quote <tt class="docutils literal"><span class="pre">x</span></tt> if you want to prevent it from being
evaluated on the Pure side. Use this with care; at present, the PROC
interface isn&#8217;t very forgiving if you try to execute invalid Lisp code;
it will most likely crash in such cases.</p>
</dd></dl>

<dl class="function">
<dt id="declare">
<tt class="descname">declare</tt> x ys<a class="headerlink" href="#declare" title="Permalink to this definition">¶</a></dt>
<dd><p>Declare symbol properties. Currently, the following common kinds of
declarations are supported:</p>
<div class="highlight-pure"><div class="highlight"><pre>declare operator [foo,bar,...]<span class="p">;</span>
declare depend [y,x,...]<span class="p">;</span>
declare nodepend [y,x,...]<span class="p">;</span>
declare property [x,y,...]<span class="p">;</span>
</pre></div>
</div>
<p>In the latter form, <tt class="docutils literal"><span class="pre">property</span></tt> can be any of <tt class="docutils literal"><span class="pre">even</span></tt>, <tt class="docutils literal"><span class="pre">odd</span></tt>,
<tt class="docutils literal"><span class="pre">linear</span></tt> and <tt class="docutils literal"><span class="pre">symmetric</span></tt>. <tt class="docutils literal"><span class="pre">ys</span></tt> can also be a singleton symbol if
the declaration permits this. Please see the Reduce manual for details.</p>
</dd></dl>

<p>In Pure land, REDUCE expressions are represented using standard curried
notation; some special conversions are applied to make arithmetic
operations such as +, * etc. work as expected. For convenience, the REDUCE
terms <tt class="docutils literal"><span class="pre">arbconst</span> <span class="pre">n</span></tt>, <tt class="docutils literal"><span class="pre">arbint</span> <span class="pre">n</span></tt> and <tt class="docutils literal"><span class="pre">arbcomplex</span> <span class="pre">n</span></tt> are converted
from/to Greek symbols <tt class="docutils literal"><span class="pre">αn</span></tt>, <tt class="docutils literal"><span class="pre">βn</span></tt> and <tt class="docutils literal"><span class="pre">ζn</span></tt>. (All these automatic
conversions can also be turned off on the output side by disabling the
<tt class="docutils literal"><span class="pre">mapped</span></tt> compilation option; this may be useful for debugging purposes.)</p>
<p>Here is a simple example showing how to start up REDUCE and do some
calculations:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span><span class="kr">using</span> reduce<span class="p">;</span>
Reduce (Free CSL version), <span class="mi">27</span>-Sep-<span class="mi">12</span> ...
<span class="gp">&gt; </span>simplify $ df ((x+<span class="mi">5</span>)^<span class="mi">3</span>) x<span class="p">;</span>
<span class="mi">3</span>*x^<span class="mi">2</span>+<span class="mi">30</span>*x+<span class="mi">75</span>
<span class="gp">&gt; </span>simplify $ solve (x^<span class="mi">2</span>+<span class="mi">7</span>) x<span class="p">;</span>
[x==sqrt <span class="mi">7</span>*i,x==-sqrt <span class="mi">7</span>*i]
</pre></div>
</div>
<p>Another example showing how to execute Lisp code:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span>lisp (&#39;list a b c d e)<span class="p">;</span>
[a,b,c,d,e]
<span class="gp">&gt; </span>lisp (&#39;cdr [a,b,[c,d],e])<span class="p">;</span>
[b,[c,d],e]
</pre></div>
</div>
<p>Note that Lisp forms are represented in curried notation. Free symbols are
quoted automatically, and Pure lists are converted to corresponding Lisp
lists. If the result is a Lisp list, it will be converted back to a Pure
list. The following example illustrates how you can use the <a class="reference internal" href="#lisp" title="lisp"><tt class="xref pure pure-func docutils literal"><span class="pre">lisp</span></tt></a>
function to declare an operator symbol and change or query its properties:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span>lisp (&#39;operator [myop])<span class="p">;</span>
[]
<span class="gp">&gt; </span>lisp (&#39;flag [myop] odd)<span class="p">;</span>
[]
<span class="gp">&gt; </span>lisp (&#39;prop myop)<span class="p">;</span>
[odd:t,simpfn:simpiden]
<span class="gp">&gt; </span>simplify (myop (-x))<span class="p">;</span>
-myop x
</pre></div>
</div>
<p>The same can also be done with the <a class="reference internal" href="#declare" title="declare"><tt class="xref pure pure-func docutils literal"><span class="pre">declare</span></tt></a> function as follows:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span>declare operator myop<span class="p">;</span>
[]
<span class="gp">&gt; </span>declare odd myop<span class="p">;</span>
[]
<span class="gp">&gt; </span>simplify (myop (-x))<span class="p">;</span>
-myop x
</pre></div>
</div>
<p>Please see reduce_examp.pure and tests.pure for more examples.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">A REDUCE Interface for the Pure Programming Language</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#high-level-interface">High-Level Interface</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pure-rational.html"
                        title="previous chapter">Pure-Rational - Rational number library for the Pure programming language</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pure-csv.html"
                        title="next chapter">Pure-CSV - Comma Separated Value Interface for the Pure Programming Language</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pure-reduce.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pure-modindex.html" title="Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pure-csv.html" title="Pure-CSV - Comma Separated Value Interface for the Pure Programming Language"
             >next</a> |</li>
        <li class="right" >
          <a href="pure-rational.html" title="Pure-Rational - Rational number library for the Pure programming language"
             >previous</a> |</li>
        <li><a href="index.html">Pure Language and Library Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2010, Albert Gräf et al.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>