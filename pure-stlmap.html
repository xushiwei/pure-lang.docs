

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pure-stlmap &mdash; Pure Language and Library Documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.48',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Pure Language and Library Documentation" href="index.html" />
    <link rel="next" title="pure-stlvec" href="pure-stlvec.html" />
    <link rel="prev" title="pure-sockets: Pure Sockets Interface" href="pure-sockets.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pure-modindex.html" title="Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pure-stlvec.html" title="pure-stlvec"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pure-sockets.html" title="pure-sockets: Pure Sockets Interface"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Pure Language and Library Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="pure-stlmap">
<h1>pure-stlmap<a class="headerlink" href="#pure-stlmap" title="Permalink to this headline">¶</a></h1>
<p>Version 0.0, October 29, 2011</p>
<p>Albert Graef &lt;<a class="reference external" href="mailto:Dr&#46;Graef&#37;&#52;&#48;t-online&#46;de">Dr<span>&#46;</span>Graef<span>&#64;</span>t-online<span>&#46;</span>de</a>&gt;</p>
<p>This package provides a light-weight, no frills interface to the C++ <tt class="docutils literal"><span class="pre">map</span></tt>
and <tt class="docutils literal"><span class="pre">unordered_map</span></tt> containers, see the <a class="reference external" href="http://en.cppreference.com/w/cpp">C++ standard library
documentation</a> for details. (The C++ containers were originally based on the
<a class="reference external" href="http://www.sgi.com/tech/stl/">Standard Template Library</a>, so they are also sometimes referred to as &#8220;STL
containers&#8221;; hence the name of this package.)</p>
<p>The package includes the <tt class="docutils literal"><span class="pre">hashmap</span></tt> and <tt class="docutils literal"><span class="pre">ordmap</span></tt> modules which make these
data structures available in Pure land and equip them with a (more or less)
idiomatic Pure container interface.</p>
<div class="section" id="copying">
<h2>Copying<a class="headerlink" href="#copying" title="Permalink to this headline">¶</a></h2>
<p>Copyright (c) 2011 by Albert Graef.</p>
<p>pure-stlmap is free software: you can redistribute it and/or modify it under
the terms of the GNU Lesser General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option) any
later version.</p>
<p>pure-stlmap is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more
details.</p>
<p>You should have received a copy of the GNU Lesser General Public License along
with this program.  If not, see &lt;<a class="reference external" href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Get the latest source from
<a class="reference external" href="http://pure-lang.googlecode.com/files/pure-stlmap-0.0.tar.gz">http://pure-lang.googlecode.com/files/pure-stlmap-0.0.tar.gz</a>.</p>
<p>Run <tt class="docutils literal"><span class="pre">make</span></tt> to compile the modules and <tt class="docutils literal"><span class="pre">make</span> <span class="pre">install</span></tt> (as root) to install
them in the Pure library directory. This requires GNU make, and of course you
need to have Pure (and a C++ library which includes the STL) installed.</p>
<p><tt class="docutils literal"><span class="pre">make</span></tt> tries to guess your Pure installation directory and platform-specific
setup. If it gets this wrong, you can set some variables manually, please
check the Makefile for details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This module requires Pure 0.49 or later and a recent version of the
C++ library (GNU libstdc++ v3 has been tested). All proper C++11 libraries
should work out of the box, while (recent) C++0x implementations may
require some fiddling with the sources and/or the compilation options. Pre
C++0x library versions surely require considerably more work, especially in
the hashmap module.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>After installation, you can use the operations of this package by placing one
or both of the following import declarations in your Pure programs:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="kr">using</span> hashmap<span class="p">;</span>
<span class="kr">using</span> ordmap<span class="p">;</span>
</pre></div>
</div>
<p>In Pure land, the C++ <tt class="docutils literal"><span class="pre">map</span></tt> and <tt class="docutils literal"><span class="pre">unordered_map</span></tt> containers and their
<tt class="docutils literal"><span class="pre">multimap</span></tt> variants are made available as a collection of four data
structures:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">hashmap</span></tt>, <tt class="docutils literal"><span class="pre">hashmmap</span></tt>: Hashed (unordered) map and multimap data
structures. These work with arbitrary key (and value) types, like the hashed
dictionary and set data structures in the standard library, and can be found
in the <tt class="docutils literal"><span class="pre">hashmap.pure</span></tt> module.</li>
<li><tt class="docutils literal"><span class="pre">ordmap</span></tt>, <tt class="docutils literal"><span class="pre">ordmmap</span></tt>: Ordered map and multimap data structures. These
require the keys to be ordered by the standard <tt class="docutils literal"><span class="pre">&lt;</span></tt> predicate, like the
ordered dictionary and set data structures in the standard library, and can
be found in the <tt class="docutils literal"><span class="pre">ordmap.pure</span></tt> module.</li>
</ul>
<p>All data structures offer most of the usual Pure container interface and can
be used either as dictionaries (holding key =&gt; value pairs) or sets (holding
only keys, without associated values). The data structures are very thin
wrappers around the C++ container types; in fact, they are just pointers to
the C++ containers. Memory management of these objects is automatic, and
customizable pretty-printing is provided as well.</p>
<p>The most important difference to the dictionary and set types in the standard
library is that the hashmap and ordmap containers are <em>mutable</em> data
structures; inserting and deleting members really modifies the underlying C++
containers. (However, it is possible to take copies of the containers in
situations where it&#8217;s necessary to preserve value semantics.)</p>
<p>Also note that not the full standard dictionary and set interface is provided;
in particular, submap comparisons and set union/difference/intersection
operations are missing right now (the C++ library doesn&#8217;t have these either),
but it&#8217;s easy to define them yourself if needed (please see the included
examples).</p>
<p>Documentation of the types and functions provided by the modules is still to
be written, so for the time being please refer to the module sources and the
included examples instead.</p>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>Some basic examples showing hashmaps in action:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span><span class="kr">using</span> hashmap<span class="p">;</span>
<span class="gp">&gt; </span><span class="kr">let</span> m = hashmap [foo=&gt;<span class="mi">99</span>, bar=&gt;bar <span class="mi">4711L</span>, baz=&gt;<span class="mi">1</span>..<span class="mi">5</span>]<span class="p">;</span> m<span class="p">;</span>
hashmap [foo=&gt;<span class="mi">99</span>,bar=&gt;bar <span class="mi">4711L</span>,baz=&gt;[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>]]
<span class="gp">&gt; </span>m!bar<span class="p">;</span>
bar <span class="mi">4711L</span>
<span class="gp">&gt; </span>keys m<span class="p">;</span>
[foo,bar,baz]
<span class="gp">&gt; </span>vals m<span class="p">;</span>
[<span class="mi">99</span>,bar <span class="mi">4711L</span>,[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>]]
<span class="gp">&gt; </span>list m<span class="p">;</span>
[foo=&gt;<span class="mi">99</span>,bar=&gt;bar <span class="mi">4711L</span>,baz=&gt;[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>]]
<span class="gp">&gt; </span>member m foo, member m bar<span class="p">;</span>
<span class="mi">1</span>,<span class="mi">1</span>
<span class="gp">&gt; </span>[x,y | x=&gt;y = m]<span class="p">;</span>
[(foo,<span class="mi">99</span>),(bar,bar <span class="mi">4711L</span>),(baz,[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>])]
</pre></div>
</div>
<p>Hashed multimaps (<tt class="docutils literal"><span class="pre">hashmmap</span></tt>):</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span><span class="kr">let</span> m = hashmmap [foo=&gt;<span class="mi">99</span>,baz=&gt;<span class="mi">1</span>..<span class="mi">5</span>,baz=&gt;bar <span class="mi">4711L</span>]<span class="p">;</span> m<span class="p">;</span>
hashmmap [foo=&gt;<span class="mi">99</span>,baz=&gt;[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>],baz=&gt;bar <span class="mi">4711L</span>]
<span class="gp">&gt; </span>m!baz<span class="p">;</span>
[[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>],bar <span class="mi">4711L</span>]
<span class="gp">&gt; </span>m!foo<span class="p">;</span>
[<span class="mi">99</span>]
</pre></div>
</div>
<p>All map containers can be used as generators in list and matrix
comprehensions:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span>[x y | x=&gt;y = m]<span class="p">;</span>
[foo <span class="mi">99</span>,baz [<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>],baz (bar <span class="mi">4711L</span>)]
<span class="gp">&gt; </span>{{x<span class="p">;</span>y} | x=&gt;y = m}<span class="p">;</span>
{foo,baz,baz<span class="p">;</span><span class="mi">99</span>,[<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>],bar <span class="mi">4711L</span>}
</pre></div>
</div>
<p>This example illustrates how to employ ordered maps as a set data structure:</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span><span class="kr">using</span> ordmap<span class="p">;</span>
<span class="gp">&gt; </span><span class="kr">type</span> ordxmap x<span class="p">::</span>ordmap | ordxmap x<span class="p">::</span>ordmmap<span class="p">;</span>
<span class="gp">&gt; </span>x<span class="p">::</span>ordxmap + y<span class="p">::</span>ordxmap = foldl insert (copy x) (list y)<span class="p">;</span>
<span class="gp">&gt; </span>x<span class="p">::</span>ordxmap - y<span class="p">::</span>ordxmap = foldl delete (copy x) (list y)<span class="p">;</span>
<span class="gp">&gt; </span>x<span class="p">::</span>ordxmap * y<span class="p">::</span>ordxmap = x-(x-y)<span class="p">;</span>
<span class="gp">&gt; </span><span class="kr">let</span> m1 = ordmap [<span class="mi">5</span>,<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">11</span>,<span class="mi">3</span>]<span class="p">;</span>
<span class="gp">&gt; </span><span class="kr">let</span> m2 = ordmap (<span class="mi">3</span>..<span class="mi">6</span>)<span class="p">;</span>
<span class="gp">&gt; </span>m1<span class="p">;</span>m2<span class="p">;</span>
ordmap [<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">5</span>,<span class="mi">11</span>]
ordmap [<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span>]
<span class="gp">&gt; </span>m1+m2<span class="p">;</span>
ordmap [<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span>,<span class="mi">11</span>]
<span class="gp">&gt; </span>m1-m2<span class="p">;</span>
ordmap [<span class="mi">1</span>,<span class="mi">11</span>]
<span class="gp">&gt; </span>m1*m2<span class="p">;</span>
ordmap [<span class="mi">3</span>,<span class="mi">5</span>]
</pre></div>
</div>
<p>Using <tt class="docutils literal"><span class="pre">ordmmap</span></tt> instead of <tt class="docutils literal"><span class="pre">ordmap</span></tt>, we also get ordered multisets
(&#8220;bags&#8221;):</p>
<div class="highlight-pure"><div class="highlight"><pre><span class="gp">&gt; </span><span class="kr">let</span> m1 = ordmmap [<span class="mi">5</span>,<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">11</span>,<span class="mi">3</span>]<span class="p">;</span>
<span class="gp">&gt; </span><span class="kr">let</span> m2 = ordmmap (<span class="mi">3</span>..<span class="mi">6</span>)<span class="p">;</span>
<span class="gp">&gt; </span>m1<span class="p">;</span>m2<span class="p">;</span>
ordmmap [<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">3</span>,<span class="mi">5</span>,<span class="mi">11</span>]
ordmmap [<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span>]
<span class="gp">&gt; </span>m1+m2<span class="p">;</span>
ordmmap [<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">3</span>,<span class="mi">3</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">5</span>,<span class="mi">6</span>,<span class="mi">11</span>]
<span class="gp">&gt; </span>m1-m2<span class="p">;</span>
ordmmap [<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">11</span>]
<span class="gp">&gt; </span>m1*m2<span class="p">;</span>
ordmmap [<span class="mi">3</span>,<span class="mi">5</span>]
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pure-stlmap</a><ul>
<li><a class="reference internal" href="#copying">Copying</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pure-sockets.html"
                        title="previous chapter">pure-sockets: Pure Sockets Interface</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pure-stlvec.html"
                        title="next chapter">pure-stlvec</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/pure-stlmap.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pure-modindex.html" title="Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pure-stlvec.html" title="pure-stlvec"
             >next</a> |</li>
        <li class="right" >
          <a href="pure-sockets.html" title="pure-sockets: Pure Sockets Interface"
             >previous</a> |</li>
        <li><a href="index.html">Pure Language and Library Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2010, Albert Gräf et al.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>